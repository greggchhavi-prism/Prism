<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Prism Profile</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0f0e1a;
    --bg-card: #1a1830;
    --indigo: #4f46e5;
    --indigo-soft: #6366f1;
    --violet: #7c3aed;
    --rose: #e11d48;
    --amber: #f59e0b;
    --teal: #0d9488;
    --text: #e8e6f0;
    --text-muted: #9490b0;
    --text-dim: #5e5a78;
    --border: rgba(255,255,255,0.07);
    --prism-gradient: linear-gradient(135deg, #4f46e5, #7c3aed, #ec4899, #f59e0b);
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; font-weight: 300; min-height: 100vh; overflow-x: hidden; }
  body::before { content: ''; position: fixed; top: -30%; left: -20%; width: 70%; height: 70%; background: radial-gradient(ellipse, rgba(79,70,229,0.12) 0%, transparent 70%); pointer-events: none; z-index: 0; }
  body::after { content: ''; position: fixed; bottom: -20%; right: -10%; width: 50%; height: 60%; background: radial-gradient(ellipse, rgba(124,58,237,0.08) 0%, transparent 70%); pointer-events: none; z-index: 0; }
  .loading-screen { position: fixed; inset: 0; background: var(--bg); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; transition: opacity 0.6s ease; }
  .loading-screen.hidden { opacity: 0; pointer-events: none; }
  .loading-prism { width: 48px; height: 48px; margin-bottom: 24px; animation: float 2s ease-in-out infinite; }
  .loading-text { font-size: 12px; letter-spacing: 0.3em; text-transform: uppercase; color: var(--text-dim); }
  .error-screen { display: none; position: fixed; inset: 0; background: var(--bg); align-items: center; justify-content: center; z-index: 100; flex-direction: column; gap: 16px; text-align: center; padding: 32px; }
  .error-screen.visible { display: flex; }
  .error-screen h2 { font-family: 'Cormorant Garamond', serif; font-size: 32px; font-weight: 300; }
  .error-screen p { color: var(--text-dim); font-size: 14px; max-width: 400px; line-height: 1.7; }
  .container { position: relative; z-index: 1; max-width: 860px; margin: 0 auto; padding: 0 24px 80px; opacity: 0; transition: opacity 0.8s ease; }
  .container.visible { opacity: 1; }
  .zone-hit { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 60px 0 40px; position: relative; }
  .prism-mark { width: 64px; height: 64px; margin-bottom: 32px; animation: float 6s ease-in-out infinite; }
  @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-8px); } }
  .prism-label { font-size: 11px; font-weight: 500; letter-spacing: 0.25em; text-transform: uppercase; color: var(--text-dim); margin-bottom: 16px; }
  .type-name { font-family: 'Cormorant Garamond', serif; font-size: clamp(56px, 10vw, 96px); font-weight: 300; line-height: 1; letter-spacing: -0.02em; background: var(--prism-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 32px; }
  .mirror { font-family: 'Cormorant Garamond', serif; font-size: clamp(18px, 3vw, 26px); font-weight: 300; font-style: italic; color: var(--text); line-height: 1.6; max-width: 640px; }
  .scroll-hint { position: absolute; bottom: 32px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 8px; color: var(--text-dim); font-size: 11px; letter-spacing: 0.15em; text-transform: uppercase; }
  .scroll-line { width: 1px; height: 40px; background: linear-gradient(to bottom, var(--text-dim), transparent); animation: scrollPulse 2s ease-in-out infinite; }
  @keyframes scrollPulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
  .section-gap { margin-bottom: 72px; }
  .section-divider { display: flex; align-items: center; gap: 16px; margin-bottom: 32px; font-size: 10px; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; color: var(--text-dim); justify-content: center; }
  .section-divider::before, .section-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  .two-sides { display: grid; grid-template-columns: 1fr 1fr; gap: 2px; border-radius: 16px; overflow: hidden; }
  .side-card { padding: 40px 36px; }
  .side-card.superpower { background: linear-gradient(145deg, #1e1c35, #252240); border-left: 3px solid var(--indigo-soft); }
  .side-card.shadow { background: linear-gradient(145deg, #1e1c2e, #1a1828); border-left: 3px solid rgba(124,58,237,0.5); }
  .side-icon { font-size: 28px; margin-bottom: 16px; display: block; }
  .side-title { font-size: 10px; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; margin-bottom: 16px; }
  .side-card.superpower .side-title { color: rgba(99,102,241,0.8); }
  .side-card.shadow .side-title { color: rgba(124,58,237,0.6); }
  .side-text { font-size: 15px; line-height: 1.75; color: var(--text); font-weight: 300; }
  .journey-track { display: grid; grid-template-columns: 1fr auto 1fr; align-items: stretch; }
  .journey-card { padding: 36px 32px; }
  .journey-card.before { background: var(--bg-card); border-radius: 16px 0 0 16px; border: 1px solid var(--border); border-right: none; }
  .journey-card.after { background: linear-gradient(145deg, #1a1e35, #1e2240); border-radius: 0 16px 16px 0; border: 1px solid rgba(79,70,229,0.2); border-left: none; }
  .journey-divider { display: flex; align-items: center; justify-content: center; width: 48px; position: relative; }
  .journey-divider::before { content: ''; position: absolute; top: 0; bottom: 0; left: 50%; width: 1px; background: linear-gradient(to bottom, transparent, var(--indigo), transparent); }
  .arrow-circle { width: 36px; height: 36px; border-radius: 50%; background: var(--bg); border: 1px solid var(--indigo); display: flex; align-items: center; justify-content: center; position: relative; z-index: 1; color: var(--indigo-soft); font-size: 14px; }
  .journey-tag { font-size: 10px; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; margin-bottom: 16px; display: block; }
  .before .journey-tag { color: var(--text-dim); }
  .after .journey-tag { color: rgba(99,102,241,0.8); }
  .journey-text { font-size: 14px; line-height: 1.8; font-weight: 300; }
  .before .journey-text { color: var(--text-muted); }
  .after .journey-text { color: var(--text); }
  .gifts-header { text-align: center; margin-bottom: 40px; }
  .gifts-title { font-family: 'Cormorant Garamond', serif; font-size: 40px; font-weight: 300; font-style: italic; margin-bottom: 8px; }
  .gifts-subtitle { font-size: 13px; color: var(--text-dim); font-weight: 300; }
  .gifts-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .gift-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px 28px; transition: border-color 0.3s ease, transform 0.3s ease; position: relative; overflow: hidden; }
  .gift-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; opacity: 0; transition: opacity 0.3s ease; }
  .gift-card:hover { border-color: rgba(99,102,241,0.3); transform: translateY(-2px); }
  .gift-card:hover::before { opacity: 1; }
  .gift-card:nth-child(1)::before { background: linear-gradient(90deg, var(--indigo), var(--violet)); }
  .gift-card:nth-child(2)::before { background: linear-gradient(90deg, var(--violet), var(--rose)); }
  .gift-card:nth-child(3)::before { background: linear-gradient(90deg, var(--teal), var(--indigo)); }
  .gift-card:nth-child(4)::before { background: linear-gradient(90deg, var(--amber), var(--rose)); }
  .gift-icon { font-size: 24px; margin-bottom: 12px; display: block; }
  .gift-label { font-size: 10px; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; color: var(--text-dim); margin-bottom: 12px; display: block; }
  .gift-text { font-size: 14px; line-height: 1.75; color: var(--text-muted); font-weight: 300; }
  .reveal { opacity: 0; transform: translateY(16px); transition: opacity 0.7s ease, transform 0.7s ease; }
  .reveal.visible { opacity: 1; transform: translateY(0); }
  @media (max-width: 640px) {
    .two-sides { grid-template-columns: 1fr; }
    .journey-track { grid-template-columns: 1fr; }
    .journey-card.before { border-radius: 16px 16px 0 0; border-right: 1px solid var(--border); border-bottom: none; }
    .journey-card.after { border-radius: 0 0 16px 16px; border-left: 1px solid rgba(79,70,229,0.2); border-top: none; }
    .journey-divider { width: 100%; height: 48px; }
    .journey-divider::before { top: 50%; bottom: auto; left: 0; right: 0; width: 100%; height: 1px; }
    .gifts-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
<div class="loading-screen" id="loadingScreen">
  <svg class="loading-prism" viewBox="0 0 64 64" fill="none">
    <defs>
      <linearGradient id="lg1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#4f46e5"/>
        <stop offset="50%" stop-color="#ec4899"/>
        <stop offset="100%" stop-color="#f59e0b"/>
      </linearGradient>
    </defs>
    <polygon points="32,4 60,56 4,56" fill="none" stroke="url(#lg1)" stroke-width="1.5"/>
    <circle cx="32" cy="4" r="2" fill="white" opacity="0.6"/>
  </svg>
  <p class="loading-text">Reading your pattern</p>
</div>
<div class="error-screen" id="errorScreen">
  <svg width="48" height="48" viewBox="0 0 64 64" fill="none">
    <polygon points="32,4 60,56 4,56" fill="none" stroke="#5e5a78" stroke-width="1.5"/>
  </svg>
  <h2>Profile not found</h2>
  <p>We couldn't locate this Prism profile. Please check your link or retake the assessment.</p>
</div>
<div class="container" id="profileContainer">
  <div class="zone-hit">
    <svg class="prism-mark" viewBox="0 0 64 64" fill="none">
      <defs>
        <linearGradient id="lg2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#4f46e5"/>
          <stop offset="40%" stop-color="#7c3aed"/>
          <stop offset="75%" stop-color="#ec4899"/>
          <stop offset="100%" stop-color="#f59e0b"/>
        </linearGradient>
      </defs>
      <polygon points="32,4 60,56 4,56" fill="none" stroke="url(#lg2)" stroke-width="1.5"/>
      <line x1="32" y1="4" x2="32" y2="56" stroke="url(#lg2)" stroke-width="0.8" stroke-dasharray="2,3" opacity="0.5"/>
      <circle cx="32" cy="4" r="2" fill="white" opacity="0.6"/>
    </svg>
    <p class="prism-label">Your Prism Profile</p>
    <h1 class="type-name" id="typeName"></h1>
    <p class="mirror" id="mirror"></p>
    <div class="scroll-hint">
      <span>Scroll</span>
      <div class="scroll-line"></div>
    </div>
  </div>
  <div class="section-gap reveal">
    <div class="section-divider">Your two sides</div>
    <div class="two-sides">
      <div class="side-card superpower">
        <span class="side-icon">✦</span>
        <div class="side-title">Superpower</div>
        <p class="side-text" id="superpower"></p>
      </div>
      <div class="side-card shadow">
        <span class="side-icon">◐</span>
        <div class="side-title">Shadow Side</div>
        <p class="side-text" id="shadow"></p>
      </div>
    </div>
  </div>
  <div class="section-gap reveal">
    <div class="section-divider">Your journey</div>
    <div class="journey-track">
      <div class="journey-card before">
        <span class="journey-tag">Before Prism</span>
        <p class="journey-text" id="before"></p>
      </div>
      <div class="journey-divider">
        <div class="arrow-circle">→</div>
      </div>
      <div class="journey-card after">
        <span class="journey-tag">Now You Know</span>
        <p class="journey-text" id="after"></p>
      </div>
    </div>
  </div>
  <div class="zone-gifts reveal">
    <div class="gifts-header">
      <h2 class="gifts-title">Your world</h2>
      <p class="gifts-subtitle">Environments, practices, and paths designed for how your mind works</p>
    </div>
    <div class="gifts-grid">
      <div class="gift-card">
        <span class="gift-icon">◈</span>
        <span class="gift-label">Careers</span>
        <p class="gift-text" id="careers"></p>
      </div>
      <div class="gift-card">
        <span class="gift-icon">◇</span>
        <span class="gift-label">Creative Practice</span>
        <p class="gift-text" id="creative"></p>
      </div>
      <div class="gift-card">
        <span class="gift-icon">♩</span>
        <span class="gift-label">Music</span>
        <p class="gift-text" id="music"></p>
      </div>
      <div class="gift-card">
        <span class="gift-icon">◎</span>
        <span class="gift-label">Movement</span>
        <p class="gift-text" id="movement"></p>
      </div>
    </div>
  </div>
</div>
<script>
  async function loadProfile() {
    const params = new URLSearchParams(window.location.search);
    const prismType = params.get('type');
    if (!prismType) { showError(); return; }
    try {
      const res = await fetch(`/.netlify/functions/get-profile?type=${encodeURIComponent(prismType)}`);
      const data = await res.json();
      if (!data.fields) { showError(); return; }
      const f = data.fields;
      document.getElementById('typeName').textContent = f.PrismType || '';
      document.getElementById('mirror').textContent = f.Mirror || '';
      document.getElementById('superpower').textContent = f.Superpower || '';
      document.getElementById('shadow').textContent = f.Shadow || '';
      document.getElementById('before').textContent = f.Before || '';
      document.getElementById('after').textContent = f.After || '';
      document.getElementById('careers').textContent = f.Careers || '';
      document.getElementById('creative').textContent = f.Creative || '';
      document.getElementById('music').textContent = f.Music || '';
      document.getElementById('movement').textContent = f.Movement || '';
      document.title = `Your Prism Profile — ${f.PrismType}`;
      document.getElementById('loadingScreen').classList.add('hidden');
      setTimeout(() => {
        document.getElementById('profileContainer').classList.add('visible');
        document.querySelectorAll('.reveal').forEach(el => {
          new IntersectionObserver(entries => {
            entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
          }, { threshold: 0.1 }).observe(el);
        });
      }, 300);
    } catch(err) { showError(); }
  }
  function showError() {
    document.getElementById('loadingScreen').classList.add('hidden');
    document.getElementById('errorScreen').classList.add('visible');
  }
  loadProfile();
</script>
</body>
</html>
